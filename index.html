<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ciocnirea Plastică - Simulare</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 50px;
            text-align: center;
            margin: 20px;
            background-color: #a9f1df; 
        }
        canvas {
            border: 1px solid black;
            margin-top: 20px;
            background-color: #f4f4f4;
        }
        #controls {
            margin-top: 20px;
        }
        input, button {
            margin: 5px;
            padding: 10px;
            font-size: 50px;
        }
        .result {
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <h1>Simularea Ciocnirii Plăstice</h1>

    <div id="controls">
        <label for="masa1">Masa 1 (kg):</label>
        <input type="number" id="masa1" value="1">
        <br>
        <label for="viteza1">Viteza 1 (m/s):</label>
        <input type="number" id="viteza1" value="5">
        <br>
        <label for="masa2">Masa 2 (kg):</label>
        <input type="number" id="masa2" value="2">
        <br>
        <label for="viteza2">Viteza 2 (m/s):</label>
        <input type="number" id="viteza2" value="-3">
        <br><br>
        <button id="calcButton">Calculează Ciocnirea</button>
        <button id="drawButton">Desenează Ciocnirea</button>
    </div>

    <div class="result">
        <p id="energieBefore"></p>
        <p id="energieAfter"></p>
        <p id="vitezaFinala"></p>
        <p id="calduraDegajata"></p>
    </div>

    <canvas id="ciocnireCanvas" width="600" height="300"></canvas>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const calcButton = document.getElementById("calcButton");
            const drawButton = document.getElementById("drawButton");
            const canvas = document.getElementById("ciocnireCanvas");
            const ctx = canvas.getContext("2d");

            // Eveniment pentru butonul "Calculează Ciocnirea"
            calcButton.addEventListener("click", function() {
                let masa1 = parseFloat(document.getElementById("masa1").value);
                let viteza1 = parseFloat(document.getElementById("viteza1").value);
                let masa2 = parseFloat(document.getElementById("masa2").value);
                let viteza2 = parseFloat(document.getElementById("viteza2").value);

                if (isNaN(masa1) || isNaN(viteza1) || isNaN(masa2) || isNaN(viteza2)) {
                    alert("Vă rugăm să completați toate câmpurile.");
                    return;
                }

                // Calcul energie înainte de ciocnire
                let energieBefore1 = 0.5 * masa1 * Math.pow(viteza1, 2);
                let energieBefore2 = 0.5 * masa2 * Math.pow(viteza2, 2);
                let energieBeforeTotala = energieBefore1 + energieBefore2;

                // Calcul viteza finală
                let vitezaFinala = (masa1 * viteza1 + masa2 * viteza2) / (masa1 + masa2);

                // Calcul energie după ciocnire
                let energieAfter = 0.5 * (masa1 + masa2) * Math.pow(vitezaFinala, 2);

                // Calcul căldura degajată
                let calduraDegajata = energieBeforeTotala - energieAfter;

                // Afișăm rezultatele
                document.getElementById("energieBefore").innerText = "Energia totală înainte de ciocnire: " + energieBeforeTotala.toFixed(2) + " J";
                document.getElementById("energieAfter").innerText = "Energia totală după ciocnire: " + energieAfter.toFixed(2) + " J";
                document.getElementById("vitezaFinala").innerText = "Viteza finală după ciocnire: " + vitezaFinala.toFixed(2) + " m/s";
                document.getElementById("calduraDegajata").innerText = "Căldura degajată: " + calduraDegajata.toFixed(2) + " J";
            });

            // Eveniment pentru butonul "Desenează Ciocnirea"
            drawButton.addEventListener("click", function() {
                let masa1 = parseFloat(document.getElementById("masa1").value);
                let viteza1 = parseFloat(document.getElementById("viteza1").value);
                let masa2 = parseFloat(document.getElementById("masa2").value);
                let viteza2 = parseFloat(document.getElementById("viteza2").value);

                if (isNaN(masa1) || isNaN(viteza1) || isNaN(masa2) || isNaN(viteza2)) {
                    alert("Vă rugăm să completați toate câmpurile.");
                    return;
                }

                // Setăm pozițiile inițiale ale obiectelor
                let x1 = 150, x2 = 350;
                let speed1 = viteza1;
                let speed2 = viteza2;

                // Culoarea verde pentru corpul după ciocnire
                let mergedColor = "green";  

                // Calculăm viteza finală după ciocnire
                let vitezaFinala = (masa1 * viteza1 + masa2 * viteza2) / (masa1 + masa2);

                // Funcția de animație
                function animate() {
                    // Curăță canvasul
                    ctx.clearRect(0, 0, canvas.width, canvas.height);

                    // Desenăm primul corp (albastru)
                    ctx.fillStyle = "blue";
                    ctx.beginPath();
                    ctx.arc(x1, 150, 30, 0, Math.PI * 2, true);
                    ctx.fill();

                    // Desenăm al doilea corp (galben)
                    ctx.fillStyle = "yellow";
                    ctx.beginPath();
                    ctx.arc(x2, 150, 30, 0, Math.PI * 2, true);
                    ctx.fill();

                    // Mișcăm obiectele
                    x1 += speed1;
                    x2 += speed2;

                    // Verificăm coliziunea
                    if (Math.abs(x1 - x2) <= 60) { // coliziune (60 este suma razelor cercurilor)
                        // Schimbăm culoarea la verde după ciocnire
                        ctx.clearRect(0, 0, canvas.width, canvas.height);  // Curățăm pentru a desena un singur corp
                        ctx.fillStyle = mergedColor;
                        ctx.beginPath();
                        ctx.arc((x1 + x2) / 2, 150, 60, 0, Math.PI * 2, true); // Corpul fuzionat
                        ctx.fill();

                        // Viteza finală
                        speed1 = vitezaFinala;
                        speed2 = vitezaFinala;

                        // Continuăm mișcarea corpului fuzionat
                        animateMerged(speed1);
                        return;
                    }

                    // Continuăm animația
                    requestAnimationFrame(animate);
                }

                // Funcție pentru mișcarea corpului fuzionat
                function animateMerged(speed) {
                    let xMerged = (x1 + x2) / 2;
                    function moveMerged() {
                        ctx.clearRect(0, 0, canvas.width, canvas.height);  // Curățăm pentru a desena corpul fuzionat
                        ctx.fillStyle = mergedColor;
                        ctx.beginPath();
                        ctx.arc(xMerged, 150, 60, 0, Math.PI * 2, true); // Corpul fuzionat
                        ctx.fill();

                        // Mișcăm corpul fuzionat
                        xMerged += speed;

                        // Continuăm animația
                        requestAnimationFrame(moveMerged);
                    }

                    // Pornim mișcarea
                    moveMerged();
                }

                // Pornim animația
                animate();
            });
        });
    </script>

</body>
</html>
